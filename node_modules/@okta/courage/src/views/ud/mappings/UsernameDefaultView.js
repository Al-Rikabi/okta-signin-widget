define([
  'shared/views/BaseView',
  'shared/util/TemplateUtil'
], function (BaseView, TemplateUtil) {

  return BaseView.extend({

    className: 'username-default',

    events: {
      'click .override-mapping': function (e) {
        e.preventDefault();
        this.$el.hide();
      }
    },

    template: TemplateUtil.tpl('\
      <p>Username is set by \
      {{#if showLink}}\
        <a href="/admin/app/{{name}}/instance/{{id}}/#{{tab}}" target="_blank"> {{label}}</a>\
        &nbsp;&middot;&nbsp;\
        <a href="#" class="override-mapping">Override with mapping</a>\
      {{else}}\
        {{label}}\
      {{/if}}\
      </p>\
    '),

    renderTemplate: function (template) {
      var tab = 'tab-signon';
      if (this.model.get('name') === 'active_directory') {
        tab = 'tab-general';
      } else if (this.state.get('tabId') === 'appToOkta') {
        tab = 'tab-user-management';
      }
      return template({
        id: this.model.get('id'),
        label: this.model.get('label'),
        name: this.model.get('name'),
        tab: tab,
        showLink: !this.options.previewModel.get('userId')
      });
    }

  });
});
