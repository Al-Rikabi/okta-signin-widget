define([
  'underscore',
  './BasePicker'
], function (_, BasePicker) {

  return BasePicker.extend({

    apiURL: '/apps/find',

    nameAttribute: 'displayName',

    parse: function (row) {
      return _.object(['displayName', 'id', 'logo', 'name'], row.split('|'));
    },

    parseAll: function (data) {
      return _.isString(data) ? _.map(data.split(/[\n\r]/), this.parse) : data;
    },

    buildPrefetchQuery: function (ids) {
      return {ids: ids.join(','), limit: 99999}; // limit parameter is mandatory
    }

  });

});
